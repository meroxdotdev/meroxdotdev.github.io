<!-- Get 5 last posted/updated posts -->

{% assign MAX_SIZE = 5 %}
{% assign all_list = '' | split: '' %}

{% for post in site.posts %}
  {% assign datetime = post.last_modified_at | default: post.date %}
  {% capture elem %}
    {{- datetime | date: "%Y%m%d%H%M%S" -}}::{{- forloop.index0 -}}
  {% endcapture %}
  {% assign all_list = all_list | push: elem %}
{% endfor %}

{% assign all_list = all_list | sort | reverse %}
{% assign update_list = '' | split: '' %}

{% for entry in all_list limit: MAX_SIZE %}
  {% assign update_list = update_list | push: entry %}
{% endfor %}

{% if update_list.size > 0 %}
  <section id="access-lastmod">
    <h2 class="panel-heading">{{- site.data.locales[include.lang].panel.lastmod -}}</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      {% for item in update_list %}
        {% assign index = item | split: '::' | last | plus: 0 %}
        {% assign post = site.posts[index] %}
        {% assign url = post.url | relative_url %}
        <li class="text-truncate lh-lg">
          <a href="{{ url }}">{{ post.title }}</a>
        </li>
      {% endfor %}
    </ul>


<div class="promo-strip">
  <span class="promo-label">AD</span>
  <span class="promo-text">Your brand here</span>
  <a href="mailto:hello@merox.dev" class="promo-action">
    <span>Contact</span>
    <svg class="promo-arrow" width="12" height="12" viewBox="0 0 16 16">
      <path d="M6 3 L11 8 L6 13" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </a>
  
  <style>
    .promo-strip {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.875rem 0;
      margin: 2rem 0;
      border-top: 1px solid rgba(128, 128, 128, 0.12);
      border-bottom: 1px solid rgba(128, 128, 128, 0.12);
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
      font-size: 0.75rem;
      letter-spacing: 0.025em;
      color: inherit;
      opacity: 0.55;
      transition: opacity 0.3s ease;
    }

    /* Dark mode - comportament normal */
    [data-theme="dark"] .promo-strip:hover,
    .promo-strip:hover {
      opacity: 0.85;
    }

    /* Light mode - deja "highlighted" */
    [data-theme="light"] .promo-strip,
    :root:not([data-theme]) .promo-strip {
      opacity: 0.75;
    }

    [data-theme="light"] .promo-strip:hover,
    :root:not([data-theme]) .promo-strip:hover {
      opacity: 0.9;
    }

    .promo-label {
      padding: 0.2rem 0.4rem;
      background: transparent;
      border: 1px solid;
      border-radius: 3px;
      font-weight: 600;
      font-size: 0.625rem;
      letter-spacing: 0.05em;
      /* Culoare verde mint subtilă */
      color: #52b788;
      border-color: #52b788;
      opacity: 0.7;
    }

    /* Light mode - label mai vizibil */
    [data-theme="light"] .promo-label,
    :root:not([data-theme]) .promo-label {
      color: #40916c;
      border-color: #40916c;
      opacity: 0.8;
    }

    .promo-text {
      flex: 1;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 0.7rem;
      opacity: 0.9;
    }

    /* Light mode - text mai bold */
    [data-theme="light"] .promo-text,
    :root:not([data-theme]) .promo-text {
      opacity: 1;
      font-weight: 500;
    }

    .promo-action {
      display: flex;
      align-items: center;
      gap: 0.375rem;
      color: inherit;
      text-decoration: none;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 0.7rem;
      transition: gap 0.2s ease;
    }

    .promo-action:hover {
      gap: 0.5rem;
    }

    .promo-arrow {
      opacity: 0.4;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }

    /* Light mode - săgeată mai vizibilă */
    [data-theme="light"] .promo-arrow,
    :root:not([data-theme]) .promo-arrow {
      opacity: 0.6;
    }

    .promo-action:hover .promo-arrow {
      transform: translateX(2px);
      opacity: 0.7;
    }

    [data-theme="light"] .promo-action:hover .promo-arrow,
    :root:not([data-theme]) .promo-action:hover .promo-arrow {
      opacity: 0.9;
    }

    @media (max-width: 768px) {
      .promo-strip {
        font-size: 0.65rem;
        gap: 0.75rem;
        padding: 0.75rem 0;
      }
      
      .promo-label {
        font-size: 0.55rem;
        padding: 0.15rem 0.35rem;
      }
      
      .promo-text,
      .promo-action {
        font-size: 0.625rem;
      }
      
      .promo-arrow {
        width: 10px;
        height: 10px;
      }
    }
  </style>
</div>

    <!-- Google AdSense ad inside lastmod panel -->
    <div class="ad-container mt-3">
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2989869646477878"
        crossorigin="anonymous"></script>
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-2989869646477878"
           data-ad-slot="3183113175"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </section>
{% endif %}